<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>Laravel by Docker</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="assets/css/main.css"/>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Main -->
    <div id="main">
        <div class="inner">

            <!-- Header -->
            <header id="header">
                <a href="index.html" class="logo"><strong>AS-Programmer</strong>
                    Laravel и среда исполнения на Docker</a>
<!--                <ul class="icons">-->
<!--                    <li><a href="#" class="icon brands fa-twitter"><span-->
<!--                            class="label">Twitter</span></a></li>-->
<!--                    <li><a href="#" class="icon brands fa-facebook-f"><span-->
<!--                            class="label">Facebook</span></a></li>-->
<!--                    <li><a href="#" class="icon brands fa-snapchat-ghost"><span class="label">Snapchat</span></a>-->
<!--                    </li>-->
<!--                    <li><a href="#" class="icon brands fa-instagram"><span-->
<!--                            class="label">Instagram</span></a></li>-->
<!--                    <li><a href="#" class="icon brands fa-medium-m"><span-->
<!--                            class="label">Medium</span></a></li>-->
<!--                </ul>-->
            </header>

            <!-- Banner -->
            <section id="banner">
                <div class="content">
                    <header class="major">
                        <h2>Вводная часть</h2>
                        <p>Постановка задачи и создание структуры</p>
                    </header>
                    <p>Если коротко, то задача заключается в автоматизации развертывания приложений на Laravel
                        и среды их исполнения в Docker контейнерах, изолированно от ОС. Будем рассматривать по
                        отдельности развертывание на локальном компьютере и на VPS. Отличие, главным образом,
                        будет заключаться в реализации протокола HTTPS, поскольку для VPS мы получаем сертификаты
                        на реальный домен от <a href="https://letsencrypt.org/">Let's Encrypt</a>, а для локального
                        хоста мы создаем локальный центр сертификации который будет нам генерировать сертификаты
                        локального доверия для локальных доменов, определенных в известном нам файле
                        <strong><i>/etc/hosts</i></strong>. Поможет нам в этом
                        <a href="https://github.com/FiloSottile/mkcert">Mkcert</a>. Сразу хочу обратить внимание на
                        то, что я поленился запихнуть Mkcert в контейнер и он живет на локальном компьютере и
                        запускается для генерации сертификатов там же.
                    </p>
                    <p>Прежде чем приступить к решению задачи, определим требования к локальному компьютеру или
                        VPS. Все описанное ниже было протестировано на OS Linux (Ubuntu 18), на других ОS возможны
                        нюансы, в частности, связанные с различием в структуре файловых систем. Это необходимо
                        учитывать при создании общих томов между docker контейнерами и OS.
                    </p>
                    <div class="col-6 col-12-small">
                        <h4>На компьютере или VPS должны быть</h4>
                        <ul>
                            <li>OS Linux</li>
                            <li>Docker версия 19.03.0 и выше </li>
                            <li>Docker Compose версия 1.25.0 и выше</li>
                            <li>Система управления версиями Git</li>
                        </ul>
                    </div>
                    <p>Список задач можно представить следующим образом</p>
                    <div class="col-6 col-12-small">
                        <h4>Список задач</h4>
                        <ul>
                            <li>Размещение нескольких доменов.</li>
                            <li>Работа по HTTPS протоколу.</li>
                            <li>Создание необходимых для приложения Laravel сервисов.</li>
                        </ul>
                    </div>
                    <p>Первые две задачи решаются с помощью nginx reverse-proxy, который, естественно, запустим
                        в docker контейнере. Он слушает 80 и 443 порты и принимает все запросы. Его задача
                        проверить сертификат и перенаправить запрос к приложению, в соответствии с указанным в
                        запросе доменом. Третья задача так же решается запуском нескольких docker контейнеров
                        каждый из которых отвечает за отдельный сервис (nginx, mysql, php-fpm, node.js и проч.)
                        для конкретного Laravel приложения.
                    </p>
                    <h4>Функциональная схема</h4>
                    <div class="box">
                        <span class="image"><img src="images/full-docker-laravel.jpg" alt="" /></span>
                    </div>

                    <h4>Файловая структура</h4>
                    <div class="box">
                        <span class=""><img src="images/file-structure.png" alt="" /></span>
                    </div>
                    <p>Так выглядит файловая структура в общем случае. Конкретно для локального сервера и для
                        VPS будут свои нюансы о которых поговорим отдельно для каждого случая чуть позже</p>
                    <ul class="alt">
                        <li>Все проекты собраны в папке <i><strong>my-projects</strong></i></li>
                        <li>
                            Файлы для запуска контейнера <strong>reverse-proxy</strong> собраны в папке
                            <i><strong>docker-reverse-proxy</strong></i>
                        </li>
                        <li>Каждый проект лежит в отдельной папке <i><strong>project-1,2,3</strong></i></li>
                        <li>В каждом проекте есть своя папка с файлами для запуска контейнеров обеспечивающих
                            создание среды исполнения конкретного приложения Laravel
                            <i><strong>laravel-docker</strong></i>
                        </li>
                        <li>В каждом проекте есть своя папка с кодом конкретного приложения Laravel
                            <i><strong>laravel-app-1,2,3</strong></i>
                        </li>
                    </ul>
                </div>
            </section>

        </div>
    </div>

    <!-- Sidebar -->
    <div id="sidebar">
        <div class="inner">

            <!-- Menu -->
            <nav id="menu">
                <header class="major">
                    <h2>Меню</h2>
                </header>
                <ul>
                    <li><a href="index.html">Вводная часть</a></li>
                    <li><a href="generic.html">Generic</a></li>
                    <li><a href="elements.html">Elements</a></li>
                    <li>
                        <span class="opener">Submenu</span>
                        <ul>
                            <li><a href="#">Lorem Dolor</a></li>
                            <li><a href="#">Ipsum Adipiscing</a></li>
                            <li><a href="#">Tempus Magna</a></li>
                            <li><a href="#">Feugiat Veroeros</a></li>
                        </ul>
                    </li>
<!--                    <li><a href="#">Etiam Dolore</a></li>-->
<!--                    <li><a href="#">Adipiscing</a></li>-->
                    <li>
                        <span class="opener">Another Submenu</span>
                        <ul>
                            <li><a href="#">Lorem Dolor</a></li>
                            <li><a href="#">Ipsum Adipiscing</a></li>
                            <li><a href="#">Tempus Magna</a></li>
                            <li><a href="#">Feugiat Veroeros</a></li>
                        </ul>
                    </li>
<!--                    <li><a href="#">Maximus Erat</a></li>-->
<!--                    <li><a href="#">Sapien Mauris</a></li>-->
<!--                    <li><a href="#">Amet Lacinia</a></li>-->
                </ul>
            </nav>


            <!-- Section -->
            <section>
                <header class="major">
                    <h2>Get in touch</h2>
                </header>
                <p>Sed varius enim lorem ullamcorper dolore aliquam aenean ornare velit lacus, ac varius enim lorem
                    ullamcorper dolore. Proin sed aliquam facilisis ante interdum. Sed nulla amet lorem feugiat tempus
                    aliquam.</p>
                <ul class="contact">
                    <li class="icon solid fa-envelope"><a href="#">information@untitled.tld</a></li>
                    <li class="icon solid fa-phone">(000) 000-0000</li>
                    <li class="icon solid fa-home">1234 Somewhere Road #8254<br/>
                        Nashville, TN 00000-0000
                    </li>
                </ul>
            </section>

            <!-- Footer -->
            <footer id="footer">
                <p class="copyright">&copy; Untitled. All rights reserved. Demo Images: <a href="https://unsplash.com">Unsplash</a>.
                    Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
            </footer>

        </div>
    </div>

</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

</body>
</html>